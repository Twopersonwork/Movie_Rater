{"ast":null,"code":"var _jsxFileName = \"/home/prachi/workspace/Movie_Rater/src/components/MovieList.js\";\nimport React, { Component } from \"react\";\nimport { Container } from \"react-bootstrap\";\nimport MovieContainer from \"./MovieContainer\";\nimport Fuse from \"fuse.js\";\nimport { withCookies } from \"react-cookie\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass MovieList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      movies: [],\n      // for store the movies when we fetch from the server\n      matches: [],\n      // when we search movie, so result of all movies store in here\n      search: \"\" // for search keyword\n\n    };\n  } // we fetch all the movies from the server and store it on the movies\n\n\n  componentDidMount() {\n    if (this.props.searchkeyword.length > 0) {\n      this.setState({\n        search: this.props.searchkeyword\n      });\n    }\n\n    fetch(\"http://127.0.0.1:8000/api/movies/\", {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\" // Authorization: \"Token 412dd490c43ad5534dd2e1e38a92f9c32d59d62c\",\n\n      }\n    }).then(resp => resp.json()).then(res => this.setState({\n      movies: res\n    }, function () {\n      // This function give us better search functionality\n      const fuse = new Fuse(this.state.movies, {\n        keys: [\"Title\"]\n      });\n      const result = fuse.search(this.state.search);\n\n      if (!result.length) {\n        this.setState([]);\n      } else {\n        result.forEach(({\n          item\n        }) => {\n          this.state.matches.push(item);\n        });\n        this.setState({\n          movies: this.state.matches\n        });\n      }\n    })).catch(error => console.log(error));\n  }\n\n  render() {\n    console.log(\"token\", this.props.token);\n    console.log(\"movies\", this.state.movies);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Container, {\n        className: \"pl-3\",\n        children: this.state.movies.map(movie => /*#__PURE__*/_jsxDEV(MovieContainer, {\n          movie: movie\n        }, movie.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default _c = withCookies(MovieList);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["/home/prachi/workspace/Movie_Rater/src/components/MovieList.js"],"names":["React","Component","Container","MovieContainer","Fuse","withCookies","Link","Redirect","MovieList","constructor","props","state","movies","matches","search","componentDidMount","searchkeyword","length","setState","fetch","method","headers","then","resp","json","res","fuse","keys","result","forEach","item","push","catch","error","console","log","render","token","map","movie","id"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,SAAT,QAA0B,iBAA1B;AACA,OAAOC,cAAP,MAA2B,kBAA3B;AACA,OAAOC,IAAP,MAAiB,SAAjB;AACA,SAASC,WAAT,QAA4B,cAA5B;AACA,SAASC,IAAT,EAAeC,QAAf,QAA+B,kBAA/B;;;AAEA,MAAMC,SAAN,SAAwBP,SAAxB,CAAkC;AAChCQ,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AAEA,SAAKC,KAAL,GAAa;AACXC,MAAAA,MAAM,EAAE,EADG;AACC;AACZC,MAAAA,OAAO,EAAE,EAFE;AAEE;AACbC,MAAAA,MAAM,EAAE,EAHG,CAGC;;AAHD,KAAb;AAKD,GAT+B,CAWhC;;;AACAC,EAAAA,iBAAiB,GAAG;AAClB,QAAI,KAAKL,KAAL,CAAWM,aAAX,CAAyBC,MAAzB,GAAkC,CAAtC,EAAyC;AACvC,WAAKC,QAAL,CAAc;AAAEJ,QAAAA,MAAM,EAAE,KAAKJ,KAAL,CAAWM;AAArB,OAAd;AACD;;AAEDG,IAAAA,KAAK,CAAC,mCAAD,EAAsC;AACzCC,MAAAA,MAAM,EAAE,KADiC;AAEzCC,MAAAA,OAAO,EAAE;AACP,wBAAgB,kBADT,CAEP;;AAFO;AAFgC,KAAtC,CAAL,CAOGC,IAPH,CAOSC,IAAD,IAAUA,IAAI,CAACC,IAAL,EAPlB,EAQGF,IARH,CAQSG,GAAD,IACJ,KAAKP,QAAL,CAAc;AAAEN,MAAAA,MAAM,EAAEa;AAAV,KAAd,EAA+B,YAAY;AACzC;AACA,YAAMC,IAAI,GAAG,IAAItB,IAAJ,CAAS,KAAKO,KAAL,CAAWC,MAApB,EAA4B;AACvCe,QAAAA,IAAI,EAAE,CAAC,OAAD;AADiC,OAA5B,CAAb;AAGA,YAAMC,MAAM,GAAGF,IAAI,CAACZ,MAAL,CAAY,KAAKH,KAAL,CAAWG,MAAvB,CAAf;;AAEA,UAAI,CAACc,MAAM,CAACX,MAAZ,EAAoB;AAClB,aAAKC,QAAL,CAAc,EAAd;AACD,OAFD,MAEO;AACLU,QAAAA,MAAM,CAACC,OAAP,CAAe,CAAC;AAAEC,UAAAA;AAAF,SAAD,KAAc;AAC3B,eAAKnB,KAAL,CAAWE,OAAX,CAAmBkB,IAAnB,CAAwBD,IAAxB;AACD,SAFD;AAGA,aAAKZ,QAAL,CAAc;AAAEN,UAAAA,MAAM,EAAE,KAAKD,KAAL,CAAWE;AAArB,SAAd;AACD;AACF,KAfD,CATJ,EA0BGmB,KA1BH,CA0BUC,KAAD,IAAWC,OAAO,CAACC,GAAR,CAAYF,KAAZ,CA1BpB;AA2BD;;AAEDG,EAAAA,MAAM,GAAG;AACPF,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqB,KAAKzB,KAAL,CAAW2B,KAAhC;AACAH,IAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsB,KAAKxB,KAAL,CAAWC,MAAjC;AAEA,wBACE;AAAA,6BACE,QAAC,SAAD;AAAW,QAAA,SAAS,EAAC,MAArB;AAAA,kBAEG,KAAKD,KAAL,CAAWC,MAAX,CAAkB0B,GAAlB,CAAuBC,KAAD,iBACrB,QAAC,cAAD;AAA+B,UAAA,KAAK,EAAEA;AAAtC,WAAqBA,KAAK,CAACC,EAA3B;AAAA;AAAA;AAAA;AAAA,gBADD;AAFH;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YADF;AAUD;;AA5D+B;;AA+DlC,oBAAenC,WAAW,CAACG,SAAD,CAA1B","sourcesContent":["import React, { Component } from \"react\";\nimport { Container } from \"react-bootstrap\";\nimport MovieContainer from \"./MovieContainer\";\nimport Fuse from \"fuse.js\";\nimport { withCookies } from \"react-cookie\";\nimport { Link, Redirect } from \"react-router-dom\";\n\nclass MovieList extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      movies: [], // for store the movies when we fetch from the server\n      matches: [], // when we search movie, so result of all movies store in here\n      search: \"\", // for search keyword\n    };\n  }\n\n  // we fetch all the movies from the server and store it on the movies\n  componentDidMount() {\n    if (this.props.searchkeyword.length > 0) {\n      this.setState({ search: this.props.searchkeyword });\n    }\n\n    fetch(\"http://127.0.0.1:8000/api/movies/\", {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        // Authorization: \"Token 412dd490c43ad5534dd2e1e38a92f9c32d59d62c\",\n      },\n    })\n      .then((resp) => resp.json())\n      .then((res) =>\n        this.setState({ movies: res }, function () {\n          // This function give us better search functionality\n          const fuse = new Fuse(this.state.movies, {\n            keys: [\"Title\"],\n          });\n          const result = fuse.search(this.state.search);\n\n          if (!result.length) {\n            this.setState([]);\n          } else {\n            result.forEach(({ item }) => {\n              this.state.matches.push(item);\n            });\n            this.setState({ movies: this.state.matches });\n          }\n        })\n      )\n      .catch((error) => console.log(error));\n  }\n\n  render() {\n    console.log(\"token\", this.props.token);\n    console.log(\"movies\", this.state.movies);\n\n    return (\n      <div>\n        <Container className=\"pl-3\">\n          {/* pass one by one movie for displaying on to the main page */}\n          {this.state.movies.map((movie) => (\n            <MovieContainer key={movie.id} movie={movie} />\n          ))}\n        </Container>\n      </div>\n    );\n  }\n}\n\nexport default withCookies(MovieList);\n"]},"metadata":{},"sourceType":"module"}